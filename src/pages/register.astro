---
import MainLayout from '@/layouts/MainLayout.astro'
import { REGISTER_SEO, OG, SITE } from '@data/constants'
---

<MainLayout
  title={REGISTER_SEO.title}
  description={REGISTER_SEO.description}
  structuredData={REGISTER_SEO.structuredData}
  meta={[
    { property: 'og:title', content: REGISTER_SEO.title },
    { property: 'og:description', content: REGISTER_SEO.description },
    { property: 'og:type', content: 'website' },
    { property: 'og:url', content: `${SITE.url}register` },
    { property: 'og:image', content: OG.image },
  ]}
>
  <section class="mx-auto max-w-2xl px-4 py-16 sm:px-6 lg:px-8">
    <h1 class="mb-4 text-center text-3xl font-bold dark:text-white">
      Register for <span class="text-red-600 dark:text-red-400">TEDx</span>NCIT
    </h1>

    <p class="mb-8 text-center font-bold dark:text-white">
      Join us for an inspiring event and connect with like-minded individuals.
    </p>

    <!-- ✅ Tally Form Embed -->
    <iframe
      data-tally-src="https://tally.so/embed/pbderE?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
      loading="lazy"
      width="100%"
      height="672"
      frameborder="0"
      marginheight="0"
      marginwidth="0"
      title="TEDxNCIT Registration"
      class="rounded-lg"></iframe>
  </section>

  <!-- ✅ Tally Embed Script -->
  <script is:inline>
    var d = document,
      w = 'https://tally.so/widgets/embed.js',
      v = function () {
        if (typeof Tally !== 'undefined') {
          Tally.loadEmbeds()
        } else {
          d.querySelectorAll('iframe[data-tally-src]:not([src])').forEach(
            function (e) {
              e.src = e.dataset.tallySrc
            }
          )
        }
      }

    if (typeof Tally !== 'undefined') v()
    else if (!d.querySelector('script[src="' + w + '"]')) {
      var s = d.createElement('script')
      s.src = w
      s.onload = v
      s.onerror = v
      d.body.appendChild(s)
    }
  </script>
</MainLayout>
