---
interface SponsorGridProps {
  sponsors: Array<{
    id: string
    name: string
    type: string
    description: string
    longDescription: string
    url: string
    img: { src: string }
  }>
}

const { sponsors } = Astro.props
---

<div
  class="grid grid-cols-2 gap-6 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6"
>
  {
    sponsors.map((s) => (
      <button
        onclick={`window.openSponsorModal('${s.id}', 'community')`}
        class="group relative flex flex-col items-center overflow-hidden rounded-xl border-2 border-gray-200 bg-white p-5 transition-all duration-300 hover:-translate-y-1 hover:border-red-400 hover:shadow-xl dark:border-neutral-700 dark:bg-neutral-800 dark:hover:border-red-500"
      >
        {/* Decorative Glow Overlay */}
        <div class="dark:bg-red-900/20 pointer-events-none absolute right-0 top-0 -mr-16 -mt-16 h-48 w-48 rounded-full bg-red-100 opacity-0 blur-3xl transition-opacity duration-700 group-hover:opacity-100" />

        {/* Logo */}
        <div class="relative z-10 mb-3 flex h-16 w-full items-center justify-center grayscale transition-all duration-300 group-hover:grayscale-0">
          <img
            src={s.img.src}
            alt={s.name}
            class="max-h-full max-w-full object-contain"
          />
        </div>

        {/* Name */}
        <p class="relative z-10 line-clamp-2 text-center text-xs font-semibold text-gray-600 transition-colors duration-300 group-hover:text-red-500 dark:text-gray-400">
          {s.name}
        </p>

        {/* Hidden data for modal */}
        <div
          id={`data-${s.id}`}
          class="hidden"
          data-tier="community"
          data-name={s.name}
          data-desc={s.description}
          data-long-desc={s.longDescription}
          data-img={s.img.src}
          data-url={s.url}
          data-type={s.type}
        />
      </button>
    ))
  }
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
