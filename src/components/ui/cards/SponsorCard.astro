---
const {
  sponsor,
  tier = 'default',
  size = 'medium',
} = Astro.props as {
  sponsor: {
    id: string
    name: string
    type: string
    description: string
    longDescription: string
    url: string
    img: any
  }
  tier?: 'gold' | 'silver' | 'bronze' | 'community' | 'default'
  size?: 'large' | 'medium' | 'small'
}

// Tier styles with proper hierarchy
const tiers = {
  gold: {
    border: 'border-red-500 dark:border-red-400',
    borderHover: 'hover:border-red-600 dark:hover:border-red-300',
    shadow: 'shadow-2xl hover:shadow-[0_0_50px_rgba(239,68,68,0.5)]',
    glowHover:
      'group-hover:shadow-[0_0_120px_rgba(220,38,38,0.6)] dark:group-hover:shadow-[0_0_140px_rgba(248,113,113,0.5)]',
    bgCard: 'bg-white dark:bg-neutral-900',
    badge:
      'bg-gradient-to-r from-red-600 via-red-500 to-red-600 text-white font-bold shadow-xl',
    titleColor: 'text-red-950 dark:text-red-100',
    descColor: 'text-red-900 dark:text-red-200',
    imgBg: 'bg-white dark:bg-neutral-800/80',
    imgFilter: 'group-hover:scale-110 drop-shadow-xl',
    overlayGlow:
      'bg-gradient-to-br from-red-300 to-red-400 dark:from-red-700/40 dark:to-red-800/40',
    overlaySize: 'w-96 h-96 -mt-24 -mr-24',
    overlayOpacity: 'opacity-50',
  },
  silver: {
    border: 'border-gray-300 dark:border-gray-400',
    borderHover: 'hover:border-gray-200 dark:hover:border-gray-300',
    shadow: 'shadow-xl hover:shadow-[0_0_35px_rgba(229,231,235,0.4)]',
    glowHover:
      'group-hover:shadow-[0_0_90px_rgba(229,231,235,0.7)] dark:group-hover:shadow-[0_0_110px_rgba(209,213,219,0.5)]',
    bgCard: 'bg-white dark:bg-neutral-900',
    badge:
      'bg-gradient-to-r from-gray-300 via-gray-200 to-gray-300 text-gray-900 font-bold shadow-lg',
    titleColor: 'text-gray-900 dark:text-gray-100',
    descColor: 'text-gray-700 dark:text-gray-300',
    imgBg: 'bg-white dark:bg-neutral-800/50',
    imgFilter: 'group-hover:scale-105 drop-shadow-lg brightness-110',
    overlayGlow:
      'bg-gradient-to-br from-gray-300 to-gray-400 dark:from-gray-700/30 dark:to-gray-600/30',
    overlaySize: 'w-72 h-72 -mb-20 -mr-20',
    overlayOpacity: 'opacity-60',
  },
  bronze: {
    border: 'border-orange-300 dark:border-orange-600',
    borderHover: 'hover:border-orange-400 dark:hover:border-orange-500',
    shadow: 'shadow-md hover:shadow-lg',
    glowHover:
      'group-hover:shadow-[0_0_50px_rgba(249,115,22,0.25)] dark:group-hover:shadow-[0_0_60px_rgba(251,146,60,0.2)]',
    bgCard: 'bg-white dark:bg-neutral-900',
    badge:
      'bg-gradient-to-r from-orange-500 to-orange-600 text-white font-medium shadow-sm',
    titleColor: 'text-gray-900 dark:text-gray-200',
    descColor: 'text-gray-700 dark:text-gray-400',
    imgBg: 'bg-gray-50 dark:bg-neutral-800/50',
    imgFilter:
      'grayscale-[0.3] opacity-80 group-hover:grayscale-0 group-hover:opacity-100 group-hover:scale-[1.03]',
    overlayGlow:
      'bg-gradient-to-br from-orange-200 to-orange-300 dark:bg-orange-900/10',
    overlaySize: 'w-60 h-60 -mb-16 -mr-16',
    overlayOpacity: 'opacity-50',
  },
  community: {
    border: 'border-indigo-400 dark:border-indigo-500',
    borderHover: 'hover:border-indigo-500 dark:hover:border-indigo-400',
    shadow: 'shadow-md hover:shadow-[0_0_25px_rgba(99,102,241,0.2)]',
    glowHover:
      'group-hover:shadow-[0_0_60px_rgba(99,102,241,0.3)] dark:group-hover:shadow-[0_0_80px_rgba(129,140,248,0.25)]',
    bgCard: 'bg-white dark:bg-neutral-900',
    badge:
      'bg-gradient-to-r from-indigo-500 via-indigo-600 to-purple-600 text-white font-medium shadow-md',
    titleColor: 'text-indigo-900 dark:text-indigo-200',
    descColor: 'text-indigo-700 dark:text-indigo-300',
    imgBg: 'bg-white dark:bg-neutral-800/50',
    imgFilter:
      'grayscale opacity-70 group-hover:grayscale-0 group-hover:opacity-100 group-hover:scale-105',
    overlayGlow:
      'bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/20 dark:to-purple-900/20',
    overlaySize: 'w-80 h-80 -mt-20 -mr-20',
    overlayOpacity: 'opacity-0',
  },
  default: {
    border: 'border-gray-200 dark:border-neutral-700',
    borderHover: 'hover:border-gray-300 dark:hover:border-neutral-600',
    shadow: 'shadow-sm hover:shadow-md',
    glowHover: '',
    bgCard: 'bg-white dark:bg-neutral-800',
    badge: 'bg-gray-500 text-white',
    titleColor: 'text-gray-800 dark:text-gray-200',
    descColor: 'text-gray-600 dark:text-gray-400',
    imgBg: 'bg-gray-50 dark:bg-neutral-900/50',
    imgFilter: 'opacity-70 group-hover:opacity-100',
    overlayGlow: 'bg-gray-100 dark:bg-gray-800/30',
    overlaySize: 'w-80 h-80 -mt-20 -mr-20',
    overlayOpacity: 'opacity-0',
  },
}

// Size configs
const sizes = {
  large: {
    container: 'min-h-[450px]',
    layout: 'flex-col lg:flex-row',
    imageArea: 'w-full lg:w-2/5 min-h-[280px]',
    textArea: 'w-full lg:w-3/5 p-10 lg:p-12',
    title: 'text-4xl lg:text-5xl',
    desc: 'text-base lg:text-lg line-clamp-4',
    button: 'text-base',
  },
  medium: {
    container: 'min-h-[380px]',
    layout: 'flex-col',
    imageArea: 'w-full min-h-[180px]',
    textArea: 'w-full p-6',
    title: 'text-2xl lg:text-3xl',
    desc: 'text-sm line-clamp-3',
    button: 'text-sm',
  },
  small: {
    container: 'min-h-[320px]',
    layout: 'flex-col',
    imageArea: 'w-full min-h-[140px]',
    textArea: 'w-full p-5',
    title: 'text-xl',
    desc: 'text-xs line-clamp-2',
    button: 'text-sm',
  },
}

const isLowerRightGlow = tier === 'silver' || tier === 'bronze'

const currentTier = tiers[tier as keyof typeof tiers]
const currentSize = sizes[size as keyof typeof sizes]
const isLarge = size === 'large'
---

<div class="swiper-slide !h-auto">
  <div class="h-full px-2 py-6">
    <button
      onclick={`window.openSponsorModal('${sponsor.id}', '${tier}')`}
      class={`relative overflow-hidden h-full w-full rounded-2xl border-2 transition-all duration-500 cursor-pointer group ${currentTier.border} ${currentTier.borderHover} ${currentTier.shadow} ${currentTier.glowHover} ${currentTier.bgCard} ${currentSize.container} flex flex-col`}
    >
      <!-- Decorative Glow Overlay -->
      <div
        class={`absolute
    ${isLowerRightGlow ? 'bottom-0 right-0 -mb-20 -mr-20' : 'top-0 right-0 -mt-20 -mr-20'}
    w-80 h-80
    ${currentTier.overlayGlow}
    rounded-full blur-3xl
    opacity-0 group-hover:opacity-100
    transition-opacity duration-700
    pointer-events-none
  `}></div>

      <!-- Card Content -->
      <div class={`flex relative z-10 h-full ${currentSize.layout}`}>
        <!-- Image Area -->
        <div
          class={`flex items-center justify-center p-8 ${currentTier.imgBg} ${currentSize.imageArea} ${!isLarge && 'border-b-2 border-gray-100 dark:border-neutral-800'}`}
        >
          <img
            src={sponsor.img.src}
            alt={sponsor.name}
            class={`max-h-full max-w-full object-contain transition-all duration-500 ${currentTier.imgFilter}`}
          />
        </div>

        <!-- Text Area -->
        <div
          class={`flex flex-col justify-center text-left ${currentSize.textArea} flex-grow`}
        >
          <!-- Badge -->
          <div class="mb-3">
            <span
              class={`inline-block px-3 py-1.5 rounded-full text-xs uppercase tracking-wider ${currentTier.badge}`}
            >
              {sponsor.type}
            </span>
          </div>

          <!-- Title -->
          <h3
            class={`font-bold mb-3 ${currentSize.title} ${currentTier.titleColor}`}
          >
            {sponsor.name}
          </h3>

          <!-- Description -->
          <p
            class={`leading-relaxed ${currentSize.desc} ${currentTier.descColor}`}
          >
            {sponsor.description}
          </p>

          <!-- View Details Button -->
          <div
            class={`mt-auto pt-6 flex items-center gap-2 font-semibold ${currentTier.titleColor} opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 ${currentSize.button}`}
          >
            <span>View Details</span>
            <span class="text-xl leading-none">â†’</span>
          </div>
        </div>
      </div>
    </button>
  </div>
</div>
